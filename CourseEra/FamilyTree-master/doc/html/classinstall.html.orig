<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Family Tree: install Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Family Tree
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classinstall.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="classinstall-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">install Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6a8bcb2f7b567c588f4a474d46804440"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinstall.html#a6a8bcb2f7b567c588f4a474d46804440">install</a> ()</td></tr>
<tr class="memitem:a4e720dd6e62b63da8033cecf60d5eaed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinstall.html#a4e720dd6e62b63da8033cecf60d5eaed">check_directory_permission</a> ($mode, $sub)</td></tr>
<tr class="memitem:a27e554353c8f7b9eef9bc401f11765cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinstall.html#a27e554353c8f7b9eef9bc401f11765cf">ask_database_name</a> ($mode, $sub)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a8b2e00c7cc9a5031e9c98b4b6aa2c035"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinstall.html#a8b2e00c7cc9a5031e9c98b4b6aa2c035">setup_database</a> ()</td></tr>
<tr class="memitem:a7d4d4748cd5c10e21c951a75e5a55f10"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinstall.html#a7d4d4748cd5c10e21c951a75e5a55f10">installTables</a> ()</td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="install_8php_source.html#l00011">11</a> of file <a class="el" href="install_8php_source.html">install.php</a>.</p>
</div><h2>Member Function Documentation</h2>
<a class="anchor" id="a27e554353c8f7b9eef9bc401f11765cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">install::ask_database_name </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used ask the user about the database details </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$mode</td><td>Describes which phase is currently running </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$sub</td><td>Describes which part is running of the phase </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>null </dd></dl>

<p>Definition at line <a class="el" href="install_8php_source.html#l00118">118</a> of file <a class="el" href="install_8php_source.html">install.php</a>.</p>
<div class="fragment"><div class="line">                                            {</div>
<div class="line">        global $template, $db;</div>
<div class="line">        $sub = ($sub == null) ? 1 : $sub;</div>
<div class="line">        <span class="keywordflow">if</span> ($sub == 1) {</div>
<div class="line">            $template-&gt;header();</div>
<div class="line">            $template-&gt;display(<span class="stringliteral">&quot;install.ask_database_details.tpl&quot;</span>);</div>
<div class="line">        } elseif ($sub == 2) {</div>
<div class="line">            $host = $_POST[<span class="stringliteral">&#39;database_host&#39;</span>];</div>
<div class="line">            $username = $_POST[<span class="stringliteral">&#39;database_username&#39;</span>];</div>
<div class="line">            $password = $_POST[<span class="stringliteral">&#39;database_password&#39;</span>];</div>
<div class="line">            $database = $_POST[<span class="stringliteral">&#39;database_name&#39;</span>];</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (empty($host) || empty($username) || empty($password) || empty($database)) {</div>
<div class="line">                $template-&gt;header();</div>
<div class="line">                $template-&gt;assign(array(<span class="stringliteral">&quot;error&quot;</span> =&gt; 1,</div>
<div class="line">                    <span class="stringliteral">&quot;message&quot;</span> =&gt; <span class="stringliteral">&quot;Form not completed. Please complete the form&quot;</span>));</div>
<div class="line">                $template-&gt;display(<span class="stringliteral">&quot;install.ask_database_details.tpl&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">//Connect to database</span></div>
<div class="line">            $db-&gt;connect($host, $username, $password);</div>
<div class="line"></div>
<div class="line">            <span class="comment">//Create Database</span></div>
<div class="line">            $db-&gt;query(<span class="stringliteral">&quot;CREATE DATABASE if not exists $database&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="comment">//Select The given database</span></div>
<div class="line">            $db-&gt;select_db($database);</div>
<div class="line"></div>
<div class="line">            <span class="comment">//Setup basic database</span></div>
<div class="line">            $this-&gt;<a class="code" href="classinstall.html#a8b2e00c7cc9a5031e9c98b4b6aa2c035">setup_database</a>();</div>
<div class="line"></div>
<div class="line">            <span class="comment">//Now create the config.php file save it</span></div>
<div class="line">            $file = fopen(<span class="stringliteral">&quot;config.php&quot;</span>, <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line">            <span class="keywordflow">if</span> (!$file) {</div>
<div class="line">                trigger_error(<span class="stringliteral">&quot;Error opening or creating config.php file&quot;</span>, E_USER_ERROR);</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            $data = <span class="stringliteral">&quot;&lt;?php\n\$config[&#39;host&#39;]=&#39;$host&#39;;</span></div>
<div class="line"><span class="stringliteral">                    \n\$config[&#39;username&#39;]=&#39;$username&#39;;</span></div>
<div class="line"><span class="stringliteral">                    \n\$config[&#39;password&#39;]=&#39;$password&#39;;</span></div>
<div class="line"><span class="stringliteral">                    \n\$config[&#39;database&#39;]=&#39;$database&#39;;</span></div>
<div class="line"><span class="stringliteral">                    \n?&gt;&quot;</span>;</div>
<div class="line"></div>
<div class="line">            $wr = fwrite($file, $data);</div>
<div class="line">            fclose($file);</div>
<div class="line"></div>
<div class="line">            <span class="comment">//Set file permission to 0644, Never leave this 0</span></div>
<div class="line">            <span class="keywordflow">if</span> (!chmod(<span class="stringliteral">&quot;config.php&quot;</span>, 0644)) {</div>
<div class="line">                <span class="comment">//Read and write for the owner and read for everyone else</span></div>
<div class="line">                trigger_error(<span class="stringliteral">&quot;Cannot set config.php permissions&quot;</span>, E_USER_ERROR);</div>
<div class="line"></div>
<div class="line">                <span class="comment">//Check if permissions have been successfull applied or not</span></div>
<div class="line">                <span class="keywordflow">if</span> (!is_readable(<span class="stringliteral">&quot;config.php&quot;</span>)) {</div>
<div class="line">                    trigger_error(<span class="stringliteral">&quot;Wrong config.php permissions. Please give config.php file 644 permission. &lt;br&gt; Use the Following command&lt;br&gt;$ chmod 644 config.php&quot;</span>, E_USER_ERROR);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            $template-&gt;display(<span class="stringliteral">&quot;database_success.tpl&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4e720dd6e62b63da8033cecf60d5eaed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">install::check_directory_permission </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to check the required directories permission during the installation as FamilyTree needs to create some config files which can only be possible if he has the permission   $template </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$mode</td><td></td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$sub</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="install_8php_source.html#l00052">52</a> of file <a class="el" href="install_8php_source.html">install.php</a>.</p>
<div class="fragment"><div class="line">                                                     {</div>
<div class="line">        global $template;</div>
<div class="line">        $cache = <span class="keyword">false</span>;</div>
<div class="line">        $compile = <span class="keyword">false</span>;</div>
<div class="line">        $main = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">//Check if directories are writable</span></div>
<div class="line">        <span class="comment">//Template Cache directory</span></div>
<div class="line">        <span class="keywordflow">if</span> (dir_iswritable(<span class="stringliteral">&quot;template/cache&quot;</span>)) {</div>
<div class="line">            $cache = TRUE;</div>
<div class="line">            $template-&gt;assign(<span class="stringliteral">&quot;cache&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!file_exists(<span class="stringliteral">&quot;template/cache&quot;</span>)) {</div>
<div class="line">            <span class="comment">//try making the directory if possible</span></div>
<div class="line">            @mkdir(<span class="stringliteral">&quot;template/cache&quot;</span>, 0755);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//Template compile directory</span></div>
<div class="line">        <span class="keywordflow">if</span> (dir_iswritable(<span class="stringliteral">&quot;template/compile&quot;</span>)) {</div>
<div class="line">            $compile = <span class="keyword">true</span>;</div>
<div class="line">            $template-&gt;assign(<span class="stringliteral">&quot;compile&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!file_exists(<span class="stringliteral">&quot;template/compile&quot;</span>)) {</div>
<div class="line">            <span class="comment">//Trying to make the directory myself here</span></div>
<div class="line">            @mkdir(<span class="stringliteral">&quot;template/cache&quot;</span>, 0755);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//Family Tree main directory</span></div>
<div class="line">        $template-&gt;assign(<span class="stringliteral">&quot;dir&quot;</span>, <span class="stringliteral">&quot;config.php&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (dir_iswritable(<span class="stringliteral">&quot;.&quot;</span>)) {</div>
<div class="line">            $main = <span class="keyword">true</span>;</div>
<div class="line">            $template-&gt;assign(<span class="stringliteral">&quot;main&quot;</span>, TRUE);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($cache &amp;&amp; $compile &amp;&amp; $main) {</div>
<div class="line">            header(<span class="stringliteral">&quot;Location: index.php?mode=ask_database_name&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//Apparently we cannot use template as we have not write permission in compile directory</span></div>
<div class="line">        <span class="comment">//So read the tpl file and output it as it is.</span></div>
<div class="line">        <span class="comment">// We are using @ just in case we don&#39;t have permission to read</span></div>
<div class="line">        $output = file_get_contents(<span class="stringliteral">&quot;html/install.directory_check.tpl&quot;</span>);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($output === <span class="keyword">false</span>) {</div>
<div class="line">            <span class="comment">//We also cannot read that file so just print a simple plain message</span></div>
<div class="line">            echo <span class="stringliteral">&quot;Please give permission to the root folder i.e. ./FamilyTree &lt;br /&gt; The template cache folder (template/cache) &lt;br /&gt; The template compile folder (template/compile) and refresh this page&quot;</span>;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        echo $output;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!$cache) {</div>
<div class="line">            echo <span class="stringliteral">&quot;&lt;h4&gt;Cannot write in template/cache folder&lt;/h4&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (!$compile) {</div>
<div class="line">            echo <span class="stringliteral">&quot;&lt;h4&gt;Cannot write in template/compile folder&lt;/h4&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (!$main) {</div>
<div class="line">            echo <span class="stringliteral">&quot;&lt;h4&gt;Cannot write in FamilyTree&#39;s Directory&lt;/h4&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6a8bcb2f7b567c588f4a474d46804440"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">install::install </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to start the installation.  string $mode  integer $sub </p>
<dl class="section return"><dt>Returns</dt><dd>null </dd></dl>

<p>Definition at line <a class="el" href="install_8php_source.html#l00019">19</a> of file <a class="el" href="install_8php_source.html">install.php</a>.</p>
<div class="fragment"><div class="line">                       {</div>
<div class="line">        global $mode, $sub;</div>
<div class="line">        <span class="comment">//make sure to run this only if database is not installed</span></div>
<div class="line">        <span class="comment">//So check if database is installed</span></div>
<div class="line">        <span class="keywordflow">if</span> (!empty($config) and file_exists(<span class="stringliteral">&quot;../config.php&quot;</span>)) {</div>
<div class="line">            <span class="comment">//its installed! Return to index.php</span></div>
<div class="line">            header(<span class="stringliteral">&quot;Location:../index.php&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//Reached here huh? Installtion will begin now</span></div>
<div class="line">        <span class="comment">//Check mode and perform actions</span></div>
<div class="line">        <span class="keywordflow">switch</span> ($mode) {</div>
<div class="line">            <span class="comment">//All the other option will be above ask_database_name as it is also the default</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> <span class="stringliteral">&quot;ask_database_name&quot;</span>:</div>
<div class="line">                $this-&gt;<a class="code" href="classinstall.html#a27e554353c8f7b9eef9bc401f11765cf">ask_database_name</a>($mode, $sub);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <span class="stringliteral">&quot;check_directory_permission&quot;</span>:</div>
<div class="line">            <span class="keywordflow">default</span> :</div>
<div class="line">                $this-&gt;<a class="code" href="classinstall.html#a4e720dd6e62b63da8033cecf60d5eaed">check_directory_permission</a>($mode, $sub);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7d4d4748cd5c10e21c951a75e5a55f10"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">install::installTables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function is used install the tables in the database Returns true if all the tables were installed successfully else false   $db Ths instance of the db class </p>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="install_8php_source.html#l00199">199</a> of file <a class="el" href="install_8php_source.html">install.php</a>.</p>
<div class="fragment"><div class="line">                                     {</div>
<div class="line">        global $db;</div>
<div class="line">        $family = $db-&gt;query(<span class="stringliteral">&quot;Create table family (</span></div>
<div class="line"><span class="stringliteral">            id int(11) not null primary key auto_increment,</span></div>
<div class="line"><span class="stringliteral">            family_name mediumtext not null,</span></div>
<div class="line"><span class="stringliteral">            ts int(11) not null )&quot;</span>);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        $member = $db-&gt;query(<span class="stringliteral">&quot;create table member (</span></div>
<div class="line"><span class="stringliteral">            id int(11) null primary key auto_increment,</span></div>
<div class="line"><span class="stringliteral">            membername mediumtext not null,</span></div>
<div class="line"><span class="stringliteral">            username mediumtext default null,</span></div>
<div class="line"><span class="stringliteral">            password mediumtext default null,</span></div>
<div class="line"><span class="stringliteral">            sonof int(11) null default null,</span></div>
<div class="line"><span class="stringliteral">            profilepic varchar(255) default &#39;common.png&#39;,</span></div>
<div class="line"><span class="stringliteral">            dob int(11) default null,</span></div>
<div class="line"><span class="stringliteral">            gender int(1) default 0,</span></div>
<div class="line"><span class="stringliteral">            relationship_status int(11) default 0,</span></div>
<div class="line"><span class="stringliteral">            gaon mediumtext default null,</span></div>
<div class="line"><span class="stringliteral">            related_to int(11) null default null,</span></div>
<div class="line"><span class="stringliteral">            emailid text default null,</span></div>
<div class="line"><span class="stringliteral">            alive int(1) default 0,</span></div>
<div class="line"><span class="stringliteral">            aboutme longtext default null,</span></div>
<div class="line"><span class="stringliteral">            lastlogin int(11) default null,</span></div>
<div class="line"><span class="stringliteral">            joined int(11) default null,</span></div>
<div class="line"><span class="stringliteral">            approved int(1) default 0,</span></div>
<div class="line"><span class="stringliteral">            tokenforact text default null,</span></div>
<div class="line"><span class="stringliteral">            dontshow int(1) default 0,</span></div>
<div class="line"><span class="stringliteral">            family_id int(11) default 1,</span></div>
<div class="line"><span class="stringliteral">            foreign key (family_id) references family(id),</span></div>
<div class="line"><span class="stringliteral">            foreign key (related_to) references member(id) );&quot;</span>);</div>
<div class="line"></div>
<div class="line">        $feedback = $db-&gt;query(<span class="stringliteral">&quot;create table feedback (</span></div>
<div class="line"><span class="stringliteral">            id int(11) not null primary key auto_increment,</span></div>
<div class="line"><span class="stringliteral">            user_name text not null,</span></div>
<div class="line"><span class="stringliteral">            user_emailid text not null,</span></div>
<div class="line"><span class="stringliteral">            feedback_text text not null,</span></div>
<div class="line"><span class="stringliteral">            seen int(1) default 0 );&quot;</span>);</div>
<div class="line"></div>
<div class="line">        $joinrequest = $db-&gt;query(<span class="stringliteral">&quot;create table joinrequest (</span></div>
<div class="line"><span class="stringliteral">            id int(11) not null primary key auto_increment,</span></div>
<div class="line"><span class="stringliteral">            formember int(11) not null,</span></div>
<div class="line"><span class="stringliteral">            pic text default null,</span></div>
<div class="line"><span class="stringliteral">            personalmessage text default null,</span></div>
<div class="line"><span class="stringliteral">            emailid text not null,</span></div>
<div class="line"><span class="stringliteral">            tokenforact varchar(20) default null,</span></div>
<div class="line"><span class="stringliteral">            approved int(1) default 0,</span></div>
<div class="line"><span class="stringliteral">            foreign key(formember) references member(id) );&quot;</span>);</div>
<div class="line"></div>
<div class="line">        $suggested_info = $db-&gt;query(<span class="stringliteral">&quot;create table suggested_info (</span></div>
<div class="line"><span class="stringliteral">            id int(11) not null primary key auto_increment,</span></div>
<div class="line"><span class="stringliteral">            typesuggest mediumtext not null,</span></div>
<div class="line"><span class="stringliteral">            new_value text default null,</span></div>
<div class="line"><span class="stringliteral">            old_value text default null,</span></div>
<div class="line"><span class="stringliteral">            suggested_by int(11) not null,</span></div>
<div class="line"><span class="stringliteral">            suggested_to int(11) not null,</span></div>
<div class="line"><span class="stringliteral">            ts int(11) not null,</span></div>
<div class="line"><span class="stringliteral">            approved int(1) default 0,</span></div>
<div class="line"><span class="stringliteral">            foreign key(from) references member(id),</span></div>
<div class="line"><span class="stringliteral">            foreign key(to) references member(id) );&quot;</span>);</div>
<div class="line"></div>
<div class="line">        $suggest_approved = $db-&gt;query(<span class="stringliteral">&quot;create table suggest_approved (</span></div>
<div class="line"><span class="stringliteral">            id int(11) not null primary key auto_increment,</span></div>
<div class="line"><span class="stringliteral">            suggest_id int(11) not null,</span></div>
<div class="line"><span class="stringliteral">            user_id int(11) not null,</span></div>
<div class="line"><span class="stringliteral">            action int(2) not null,</span></div>
<div class="line"><span class="stringliteral">            foreign key (suggest_id) references suggested_info(id),</span></div>
<div class="line"><span class="stringliteral">            foreign key (user_id) references member(id) );&quot;</span>);</div>
<div class="line"></div>
<div class="line">        $dasfamily = $db-&gt;query(<span class="stringliteral">&quot;insert into family (family_name,ts) values(&#39;Das Family&#39;,&quot;</span> . time() . <span class="stringliteral">&quot;);&quot;</span>);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">//Now the data that we already have</span></div>
<div class="line">        $memberdata = file_get_contents(<span class="stringliteral">&quot;member_data.sql&quot;</span>);</div>
<div class="line"></div>
<div class="line">        $memberdata_sql = $db-&gt;query($memberdata);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $member &amp;&amp; $feedback &amp;&amp; $joinrequest &amp;&amp; $suggested_info</div>
<div class="line">                &amp;&amp; $suggest_approved &amp;&amp; $memberdata_sql &amp;&amp; $family &amp;&amp; $dasfamily;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8b2e00c7cc9a5031e9c98b4b6aa2c035"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">install::setup_database </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This is a private function used to setup the database   $db </p>

<p>Definition at line <a class="el" href="install_8php_source.html#l00184">184</a> of file <a class="el" href="install_8php_source.html">install.php</a>.</p>
<div class="fragment"><div class="line">                                      {</div>
<div class="line">        global $db;</div>
<div class="line">        <span class="comment">//Install the tables</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classinstall.html#a7d4d4748cd5c10e21c951a75e5a55f10">installTables</a>()) {</div>
<div class="line">            trigger_error(<span class="stringliteral">&quot;Cannot create Tables&quot;</span>, E_USER_ERROR);</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>install/<a class="el" href="install_8php_source.html">install.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classinstall.html">install</a></li>
    <li class="footer">Generated on Mon Jan 6 2014 23:06:59 for Family Tree by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
