<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Family Tree: Smarty_Internal_Utility Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Family Tree
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classSmarty__Internal__Utility.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="classSmarty__Internal__Utility-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Smarty_Internal_Utility Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a1b364412d3e053fd5c3c6c8db7301c2e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmarty__Internal__Utility.html#a1b364412d3e053fd5c3c6c8db7301c2e">compileAllTemplates</a> ($extention, $force_compile, $time_limit, $max_errors, <a class="el" href="classSmarty.html">Smarty</a> $smarty)</td></tr>
<tr class="memitem:a51ff827c1d9ec81fec9955548b60969b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmarty__Internal__Utility.html#a51ff827c1d9ec81fec9955548b60969b">compileAllConfig</a> ($extention, $force_compile, $time_limit, $max_errors, <a class="el" href="classSmarty.html">Smarty</a> $smarty)</td></tr>
<tr class="memitem:a2c7a65d80296d33dc190f9d08a971caa"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmarty__Internal__Utility.html#a2c7a65d80296d33dc190f9d08a971caa">clearCompiledTemplate</a> ($resource_name, $compile_id, $exp_time, <a class="el" href="classSmarty.html">Smarty</a> $smarty)</td></tr>
<tr class="memitem:a664b43c694061faf00508e4c566b73c0"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmarty__Internal__Utility.html#a664b43c694061faf00508e4c566b73c0">getTags</a> (<a class="el" href="classSmarty__Internal__Template.html">Smarty_Internal_Template</a> $<a class="el" href="classtemplate.html">template</a>)</td></tr>
<tr class="memitem:abe189583777fa2714b25e40eb4117320"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmarty__Internal__Utility.html#abe189583777fa2714b25e40eb4117320">testInstall</a> (<a class="el" href="classSmarty.html">Smarty</a> $smarty, &amp;$errors=null)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a46dc442428007ae8cd8ce4b732d52fa8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmarty__Internal__Utility.html#a46dc442428007ae8cd8ce4b732d52fa8">__construct</a> ()</td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="smarty__internal__utility_8php_source.html#l00041">41</a> of file <a class="el" href="smarty__internal__utility_8php_source.html">smarty_internal_utility.php</a>.</p>
</div><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a46dc442428007ae8cd8ce4b732d52fa8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Smarty_Internal_Utility::__construct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>private constructor to prevent calls creation of new instances </p>

<p>Definition at line <a class="el" href="smarty__internal__utility_8php_source.html#l00046">46</a> of file <a class="el" href="smarty__internal__utility_8php_source.html">smarty_internal_utility.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="comment">// intentionally left blank</span></div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="a2c7a65d80296d33dc190f9d08a971caa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Smarty_Internal_Utility::clearCompiledTemplate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$resource_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$compile_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$exp_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSmarty.html">Smarty</a>&#160;</td>
          <td class="paramname"><em>$smarty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Delete compiled template file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$resource_name</td><td>template name </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$compile_id</td><td>compile id </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$exp_time</td><td>expiration time </td></tr>
    <tr><td class="paramtype"><a class="el" href="classSmarty.html">Smarty</a></td><td class="paramname">$smarty</td><td><a class="el" href="classSmarty.html">Smarty</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer number of template files deleted </dd></dl>

<p>Definition at line <a class="el" href="smarty__internal__utility_8php_source.html#l00184">184</a> of file <a class="el" href="smarty__internal__utility_8php_source.html">smarty_internal_utility.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $_compile_dir = $smarty-&gt;<a class="code" href="classSmarty.html#aa0ff1cc4a979d4483a563c95d07a801a">getCompileDir</a>();</div>
<div class="line">        $_compile_id = isset($compile_id) ? preg_replace(<span class="stringliteral">&#39;![^\w\|]+!&#39;</span>, <span class="charliteral">&#39;_&#39;</span>, $compile_id) : null;</div>
<div class="line">        $_dir_sep = $smarty-&gt;use_sub_dirs ? DS : <span class="charliteral">&#39;^&#39;</span>;</div>
<div class="line">        <span class="keywordflow">if</span> (isset($resource_name)) {</div>
<div class="line">            $_save_stat = $smarty-&gt;caching;</div>
<div class="line">            $smarty-&gt;caching = <span class="keyword">false</span>;</div>
<div class="line">            $tpl = <span class="keyword">new</span> $smarty-&gt;template_class($resource_name, $smarty);</div>
<div class="line">            $smarty-&gt;caching = $_save_stat;</div>
<div class="line"></div>
<div class="line">            <span class="comment">// remove from template cache</span></div>
<div class="line">            $tpl-&gt;source; <span class="comment">// have the template registered before unset()</span></div>
<div class="line">            <span class="keywordflow">if</span> ($smarty-&gt;allow_ambiguous_resources) {</div>
<div class="line">                $_templateId = $tpl-&gt;source-&gt;unique_resource . $tpl-&gt;cache_id . $tpl-&gt;compile_id;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $_templateId = $smarty-&gt;joined_template_dir . <span class="charliteral">&#39;#&#39;</span> . $resource_name . $tpl-&gt;cache_id . $tpl-&gt;compile_id;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (isset($_templateId[150])) {</div>
<div class="line">                $_templateId = sha1($_templateId);</div>
<div class="line">            }</div>
<div class="line">            unset($smarty-&gt;template_objects[$_templateId]);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> ($tpl-&gt;source-&gt;exists) {</div>
<div class="line">                 $_resource_part_1 = basename(str_replace(<span class="charliteral">&#39;^&#39;</span>, <span class="charliteral">&#39;/&#39;</span>, $tpl-&gt;compiled-&gt;filepath));</div>
<div class="line">                 $_resource_part_1_length = strlen($_resource_part_1);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordflow">return</span> 0;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            $_resource_part_2 = str_replace(<span class="stringliteral">&#39;.php&#39;</span>,<span class="stringliteral">&#39;.cache.php&#39;</span>,$_resource_part_1);</div>
<div class="line">            $_resource_part_2_length = strlen($_resource_part_2);</div>
<div class="line">        }</div>
<div class="line">        $_dir = $_compile_dir;</div>
<div class="line">        <span class="keywordflow">if</span> ($smarty-&gt;use_sub_dirs &amp;&amp; isset($_compile_id)) {</div>
<div class="line">            $_dir .= $_compile_id . $_dir_sep;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (isset($_compile_id)) {</div>
<div class="line">            $_compile_id_part = $_compile_dir . $_compile_id . $_dir_sep;</div>
<div class="line">            $_compile_id_part_length = strlen($_compile_id_part);</div>
<div class="line">        }</div>
<div class="line">        $_count = 0;</div>
<div class="line">        <span class="keywordflow">try</span> {</div>
<div class="line">            $_compileDirs = <span class="keyword">new</span> RecursiveDirectoryIterator($_dir);</div>
<div class="line">        <span class="comment">// NOTE: UnexpectedValueException thrown for PHP &gt;= 5.3</span></div>
<div class="line">        } <span class="keywordflow">catch</span> (Exception $e) {</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        }</div>
<div class="line">        $_compile = <span class="keyword">new</span> RecursiveIteratorIterator($_compileDirs, RecursiveIteratorIterator::CHILD_FIRST);</div>
<div class="line">        <span class="keywordflow">foreach</span> ($_compile as $_file) {</div>
<div class="line">            <span class="keywordflow">if</span> (substr($_file-&gt;getBasename(), 0, 1) == <span class="charliteral">&#39;.&#39;</span> || strpos($_file, <span class="stringliteral">&#39;.svn&#39;</span>) !== <span class="keyword">false</span>)</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">            $_filepath = (string) $_file;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> ($_file-&gt;isDir()) {</div>
<div class="line">                <span class="keywordflow">if</span> (!$_compile-&gt;isDot()) {</div>
<div class="line">                    <span class="comment">// delete folder if empty</span></div>
<div class="line">                    @rmdir($_file-&gt;getPathname());</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $unlink = <span class="keyword">false</span>;</div>
<div class="line">                <span class="keywordflow">if</span> ((!isset($_compile_id) || (isset($_filepath[$_compile_id_part_length]) &amp;&amp; !strncmp($_filepath, $_compile_id_part, $_compile_id_part_length)))</div>
<div class="line">                    &amp;&amp; (!isset($resource_name)</div>
<div class="line">                        || (isset($_filepath[$_resource_part_1_length])</div>
<div class="line">                            &amp;&amp; substr_compare($_filepath, $_resource_part_1, -$_resource_part_1_length, $_resource_part_1_length) == 0)</div>
<div class="line">                        || (isset($_filepath[$_resource_part_2_length])</div>
<div class="line">                            &amp;&amp; substr_compare($_filepath, $_resource_part_2, -$_resource_part_2_length, $_resource_part_2_length) == 0))) {</div>
<div class="line">                    <span class="keywordflow">if</span> (isset($exp_time)) {</div>
<div class="line">                        <span class="keywordflow">if</span> (time() - @filemtime($_filepath) &gt;= $exp_time) {</div>
<div class="line">                            $unlink = <span class="keyword">true</span>;</div>
<div class="line">                        }</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        $unlink = <span class="keyword">true</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> ($unlink &amp;&amp; @unlink($_filepath)) {</div>
<div class="line">                    $_count++;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// clear compiled cache</span></div>
<div class="line">        Smarty_Resource::$sources = array();</div>
<div class="line">        Smarty_Resource::$compileds = array();</div>
<div class="line">        <span class="keywordflow">return</span> $_count;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a51ff827c1d9ec81fec9955548b60969b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Smarty_Internal_Utility::compileAllConfig </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$extention</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$force_compile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$time_limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$max_errors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSmarty.html">Smarty</a>&#160;</td>
          <td class="paramname"><em>$smarty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Compile all config files</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$extension</td><td>config file name extension </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$force_compile</td><td>force all to recompile </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$time_limit</td><td>set maximum execution time </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$max_errors</td><td>set maximum allowed errors </td></tr>
    <tr><td class="paramtype"><a class="el" href="classSmarty.html">Smarty</a></td><td class="paramname">$smarty</td><td><a class="el" href="classSmarty.html">Smarty</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer number of config files compiled </dd></dl>

<p>Definition at line <a class="el" href="smarty__internal__utility_8php_source.html#l00125">125</a> of file <a class="el" href="smarty__internal__utility_8php_source.html">smarty_internal_utility.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="comment">// switch off time limit</span></div>
<div class="line">        <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;set_time_limit&#39;</span>)) {</div>
<div class="line">            @set_time_limit($time_limit);</div>
<div class="line">        }</div>
<div class="line">        $smarty-&gt;force_compile = $force_compile;</div>
<div class="line">        $_count = 0;</div>
<div class="line">        $_error_count = 0;</div>
<div class="line">        <span class="comment">// loop over array of template directories</span></div>
<div class="line">        <span class="keywordflow">foreach</span>($smarty-&gt;<a class="code" href="classSmarty.html#ae20099b5aebe8102c265be978cb0808b">getConfigDir</a>() as $_dir) {</div>
<div class="line">            $_compileDirs = <span class="keyword">new</span> RecursiveDirectoryIterator($_dir);</div>
<div class="line">            $_compile = <span class="keyword">new</span> RecursiveIteratorIterator($_compileDirs);</div>
<div class="line">            <span class="keywordflow">foreach</span> ($_compile as $_fileinfo) {</div>
<div class="line">                <span class="keywordflow">if</span> (substr($_fileinfo-&gt;getBasename(),0,1) == <span class="charliteral">&#39;.&#39;</span> || strpos($_fileinfo, <span class="stringliteral">&#39;.svn&#39;</span>) !== <span class="keyword">false</span>) <span class="keywordflow">continue</span>;</div>
<div class="line">                $_file = $_fileinfo-&gt;getFilename();</div>
<div class="line">                <span class="keywordflow">if</span> (!substr_compare($_file, $extention, - strlen($extention)) == 0) <span class="keywordflow">continue</span>;</div>
<div class="line">                <span class="keywordflow">if</span> ($_fileinfo-&gt;getPath() == substr($_dir, 0, -1)) {</div>
<div class="line">                    $_config_file = $_file;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $_config_file = substr($_fileinfo-&gt;getPath(), strlen($_dir)) . DS . $_file;</div>
<div class="line">                }</div>
<div class="line">                echo <span class="stringliteral">&#39;&lt;br&gt;&#39;</span>, $_dir, <span class="stringliteral">&#39;---&#39;</span>, $_config_file;</div>
<div class="line">                flush();</div>
<div class="line">                $_start_time = microtime(<span class="keyword">true</span>);</div>
<div class="line">                <span class="keywordflow">try</span> {</div>
<div class="line">                    $_config = <span class="keyword">new</span> <a class="code" href="classSmarty__Internal__Config.html">Smarty_Internal_Config</a>($_config_file, $smarty);</div>
<div class="line">                    <span class="keywordflow">if</span> ($_config-&gt;mustCompile()) {</div>
<div class="line">                        $_config-&gt;compileConfigSource();</div>
<div class="line">                        $_count++;</div>
<div class="line">                        echo <span class="stringliteral">&#39; compiled in  &#39;</span>, microtime(<span class="keyword">true</span>) - $_start_time, <span class="stringliteral">&#39; seconds&#39;</span>;</div>
<div class="line">                        flush();</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        echo <span class="stringliteral">&#39; is up to date&#39;</span>;</div>
<div class="line">                        flush();</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">catch</span> (Exception $e) {</div>
<div class="line">                    echo <span class="stringliteral">&#39;Error: &#39;</span>, $e-&gt;getMessage(), <span class="stringliteral">&quot;&lt;br&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">                    $_error_count++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> ($max_errors !== null &amp;&amp; $_error_count == $max_errors) {</div>
<div class="line">                    echo <span class="stringliteral">&#39;&lt;br&gt;&lt;br&gt;too many errors&#39;</span>;</div>
<div class="line">                    exit();</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> $_count;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1b364412d3e053fd5c3c6c8db7301c2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Smarty_Internal_Utility::compileAllTemplates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$extention</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$force_compile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$time_limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$max_errors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSmarty.html">Smarty</a>&#160;</td>
          <td class="paramname"><em>$smarty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Compile all template files</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$extension</td><td>template file name extension </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$force_compile</td><td>force all to recompile </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$time_limit</td><td>set maximum execution time </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$max_errors</td><td>set maximum allowed errors </td></tr>
    <tr><td class="paramtype"><a class="el" href="classSmarty.html">Smarty</a></td><td class="paramname">$smarty</td><td><a class="el" href="classSmarty.html">Smarty</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer number of template files compiled </dd></dl>

<p>Definition at line <a class="el" href="smarty__internal__utility_8php_source.html#l00061">61</a> of file <a class="el" href="smarty__internal__utility_8php_source.html">smarty_internal_utility.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        <span class="comment">// switch off time limit</span></div>
<div class="line">        <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;set_time_limit&#39;</span>)) {</div>
<div class="line">            @set_time_limit($time_limit);</div>
<div class="line">        }</div>
<div class="line">        $smarty-&gt;force_compile = $force_compile;</div>
<div class="line">        $_count = 0;</div>
<div class="line">        $_error_count = 0;</div>
<div class="line">        <span class="comment">// loop over array of template directories</span></div>
<div class="line">        <span class="keywordflow">foreach</span>($smarty-&gt;<a class="code" href="classSmarty.html#a27805c46ddd1ab0027891bff3cba68fa">getTemplateDir</a>() as $_dir) {</div>
<div class="line">            $_compileDirs = <span class="keyword">new</span> RecursiveDirectoryIterator($_dir);</div>
<div class="line">            $_compile = <span class="keyword">new</span> RecursiveIteratorIterator($_compileDirs);</div>
<div class="line">            <span class="keywordflow">foreach</span> ($_compile as $_fileinfo) {</div>
<div class="line">                <span class="keywordflow">if</span> (substr($_fileinfo-&gt;getBasename(),0,1) == <span class="charliteral">&#39;.&#39;</span> || strpos($_fileinfo, <span class="stringliteral">&#39;.svn&#39;</span>) !== <span class="keyword">false</span>) <span class="keywordflow">continue</span>;</div>
<div class="line">                $_file = $_fileinfo-&gt;getFilename();</div>
<div class="line">                <span class="keywordflow">if</span> (!substr_compare($_file, $extention, - strlen($extention)) == 0) <span class="keywordflow">continue</span>;</div>
<div class="line">                <span class="keywordflow">if</span> ($_fileinfo-&gt;getPath() == substr($_dir, 0, -1)) {</div>
<div class="line">                   $_template_file = $_file;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                   $_template_file = substr($_fileinfo-&gt;getPath(), strlen($_dir)) . DS . $_file;</div>
<div class="line">                }</div>
<div class="line">                echo <span class="stringliteral">&#39;&lt;br&gt;&#39;</span>, $_dir, <span class="stringliteral">&#39;---&#39;</span>, $_template_file;</div>
<div class="line">                flush();</div>
<div class="line">                $_start_time = microtime(<span class="keyword">true</span>);</div>
<div class="line">                <span class="keywordflow">try</span> {</div>
<div class="line">                    $_tpl = $smarty-&gt;<a class="code" href="classSmarty.html#a2be55aec3b698ed65d6ae870d9bbcfc3">createTemplate</a>($_template_file,null,null,null,<span class="keyword">false</span>);</div>
<div class="line">                    <span class="keywordflow">if</span> ($_tpl-&gt;mustCompile()) {</div>
<div class="line">                        $_tpl-&gt;compileTemplateSource();</div>
<div class="line">                        $_count++;</div>
<div class="line">                        echo <span class="stringliteral">&#39; compiled in  &#39;</span>, microtime(<span class="keyword">true</span>) - $_start_time, <span class="stringliteral">&#39; seconds&#39;</span>;</div>
<div class="line">                        flush();</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        echo <span class="stringliteral">&#39; is up to date&#39;</span>;</div>
<div class="line">                        flush();</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">catch</span> (Exception $e) {</div>
<div class="line">                    echo <span class="stringliteral">&#39;Error: &#39;</span>, $e-&gt;getMessage(), <span class="stringliteral">&quot;&lt;br&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">                    $_error_count++;</div>
<div class="line">                }</div>
<div class="line">                <span class="comment">// free memory</span></div>
<div class="line">                $smarty-&gt;template_objects = array();</div>
<div class="line">                $_tpl-&gt;smarty-&gt;template_objects = array();</div>
<div class="line">                $_tpl = null;</div>
<div class="line">                <span class="keywordflow">if</span> ($max_errors !== null &amp;&amp; $_error_count == $max_errors) {</div>
<div class="line">                    echo <span class="stringliteral">&#39;&lt;br&gt;&lt;br&gt;too many errors&#39;</span>;</div>
<div class="line">                    exit();</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> $_count;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a664b43c694061faf00508e4c566b73c0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Smarty_Internal_Utility::getTags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSmarty__Internal__Template.html">Smarty_Internal_Template</a>&#160;</td>
          <td class="paramname"><em>$template</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return array of tag/attributes of all tags used by an template</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="classSmarty__Internal__Template.html">Smarty_Internal_Template</a></td><td class="paramname">$templae</td><td>template object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array of tag/attributes </dd></dl>

<p>Definition at line <a class="el" href="smarty__internal__utility_8php_source.html#l00278">278</a> of file <a class="el" href="smarty__internal__utility_8php_source.html">smarty_internal_utility.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $template-&gt;smarty-&gt;get_used_tags = <span class="keyword">true</span>;</div>
<div class="line">        $template-&gt;<a class="code" href="classSmarty__Internal__Template.html#ad6a05e0833f11d0547cb260ec42103a7">compileTemplateSource</a>();</div>
<div class="line">        <span class="keywordflow">return</span> $template-&gt;used_tags;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abe189583777fa2714b25e40eb4117320"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Smarty_Internal_Utility::testInstall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSmarty.html">Smarty</a>&#160;</td>
          <td class="paramname"><em>$smarty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$errors</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>diagnose <a class="el" href="classSmarty.html">Smarty</a> setup</p>
<p>If $errors is secified, the diagnostic report will be appended to the array, rather than being output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="classSmarty.html">Smarty</a></td><td class="paramname">$smarty</td><td><a class="el" href="classSmarty.html">Smarty</a> instance to test </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$errors</td><td>array to push results into rather than outputting them </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool status, true if everything is fine, false else </dd></dl>

<p>Definition at line <a class="el" href="smarty__internal__utility_8php_source.html#l00295">295</a> of file <a class="el" href="smarty__internal__utility_8php_source.html">smarty_internal_utility.php</a>.</p>
<div class="fragment"><div class="line">    {</div>
<div class="line">        $status = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">            echo <span class="stringliteral">&quot;&lt;PRE&gt;\n&quot;</span>;</div>
<div class="line">            echo <span class="stringliteral">&quot;Smarty Installation test...\n&quot;</span>;</div>
<div class="line">            echo <span class="stringliteral">&quot;Testing template directory...\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $_stream_resolve_include_path = function_exists(<span class="stringliteral">&#39;stream_resolve_include_path&#39;</span>);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// test if all registered template_dir are accessible</span></div>
<div class="line">        <span class="keywordflow">foreach</span>($smarty-&gt;<a class="code" href="classSmarty.html#a27805c46ddd1ab0027891bff3cba68fa">getTemplateDir</a>() as $template_dir) {</div>
<div class="line">            $_template_dir = $template_dir;</div>
<div class="line">            $template_dir = realpath($template_dir);</div>
<div class="line">            <span class="comment">// resolve include_path or fail existance</span></div>
<div class="line">            <span class="keywordflow">if</span> (!$template_dir) {</div>
<div class="line">                <span class="keywordflow">if</span> ($smarty-&gt;use_include_path &amp;&amp; !preg_match(<span class="stringliteral">&#39;/^([\/\\\\]|[a-zA-Z]:[\/\\\\])/&#39;</span>, $_template_dir)) {</div>
<div class="line">                    <span class="comment">// try PHP include_path</span></div>
<div class="line">                    <span class="keywordflow">if</span> ($_stream_resolve_include_path) {</div>
<div class="line">                        $template_dir = stream_resolve_include_path($_template_dir);</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        $template_dir = <a class="code" href="classSmarty__Internal__Get__Include__Path.html#aba01e023dde600cc9825a7931ac5c5e9">Smarty_Internal_Get_Include_Path::getIncludePath</a>($_template_dir);</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> ($template_dir !== <span class="keyword">false</span>) {</div>
<div class="line">                        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                            echo <span class="stringliteral">&quot;$template_dir is OK.\n&quot;</span>;</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">continue</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        $status = <span class="keyword">false</span>;</div>
<div class="line">                        $message = <span class="stringliteral">&quot;FAILED: $_template_dir does not exist (and couldn&#39;t be found in include_path either)&quot;</span>;</div>
<div class="line">                        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                            echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                            $errors[<span class="stringliteral">&#39;template_dir&#39;</span>] = $message;</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">continue</span>;</div>
<div class="line">                    }</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $status = <span class="keyword">false</span>;</div>
<div class="line">                    $message = <span class="stringliteral">&quot;FAILED: $_template_dir does not exist&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                        echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        $errors[<span class="stringliteral">&#39;template_dir&#39;</span>] = $message;</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (!is_dir($template_dir)) {</div>
<div class="line">                $status = <span class="keyword">false</span>;</div>
<div class="line">                $message = <span class="stringliteral">&quot;FAILED: $template_dir is not a directory&quot;</span>;</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $errors[<span class="stringliteral">&#39;template_dir&#39;</span>] = $message;</div>
<div class="line">                }</div>
<div class="line">            } elseif (!is_readable($template_dir)) {</div>
<div class="line">                $status = <span class="keyword">false</span>;</div>
<div class="line">                $message = <span class="stringliteral">&quot;FAILED: $template_dir is not readable&quot;</span>;</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $errors[<span class="stringliteral">&#39;template_dir&#39;</span>] = $message;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo <span class="stringliteral">&quot;$template_dir is OK.\n&quot;</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">            echo <span class="stringliteral">&quot;Testing compile directory...\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// test if registered compile_dir is accessible</span></div>
<div class="line">        $__compile_dir = $smarty-&gt;<a class="code" href="classSmarty.html#aa0ff1cc4a979d4483a563c95d07a801a">getCompileDir</a>();</div>
<div class="line">        $_compile_dir = realpath($__compile_dir);</div>
<div class="line">        <span class="keywordflow">if</span> (!$_compile_dir) {</div>
<div class="line">            $status = <span class="keyword">false</span>;</div>
<div class="line">            $message = <span class="stringliteral">&quot;FAILED: {$__compile_dir} does not exist&quot;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $errors[<span class="stringliteral">&#39;compile_dir&#39;</span>] = $message;</div>
<div class="line">            }</div>
<div class="line">        } elseif (!is_dir($_compile_dir)) {</div>
<div class="line">            $status = <span class="keyword">false</span>;</div>
<div class="line">            $message = <span class="stringliteral">&quot;FAILED: {$_compile_dir} is not a directory&quot;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $errors[<span class="stringliteral">&#39;compile_dir&#39;</span>] = $message;</div>
<div class="line">            }</div>
<div class="line">        } elseif (!is_readable($_compile_dir)) {</div>
<div class="line">            $status = <span class="keyword">false</span>;</div>
<div class="line">            $message = <span class="stringliteral">&quot;FAILED: {$_compile_dir} is not readable&quot;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $errors[<span class="stringliteral">&#39;compile_dir&#39;</span>] = $message;</div>
<div class="line">            }</div>
<div class="line">        } elseif (!is_writable($_compile_dir)) {</div>
<div class="line">            $status = <span class="keyword">false</span>;</div>
<div class="line">            $message = <span class="stringliteral">&quot;FAILED: {$_compile_dir} is not writable&quot;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $errors[<span class="stringliteral">&#39;compile_dir&#39;</span>] = $message;</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo <span class="stringliteral">&quot;{$_compile_dir} is OK.\n&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">            echo <span class="stringliteral">&quot;Testing plugins directory...\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// test if all registered plugins_dir are accessible</span></div>
<div class="line">        <span class="comment">// and if core plugins directory is still registered</span></div>
<div class="line">        $_core_plugins_dir = realpath(dirname(__FILE__) .<span class="stringliteral">&#39;/../plugins&#39;</span>);</div>
<div class="line">        $_core_plugins_available = <span class="keyword">false</span>;</div>
<div class="line">        <span class="keywordflow">foreach</span>($smarty-&gt;<a class="code" href="classSmarty.html#a4af16b0f23939c67004b68610d0fac44">getPluginsDir</a>() as $plugin_dir) {</div>
<div class="line">            $_plugin_dir = $plugin_dir;</div>
<div class="line">            $plugin_dir = realpath($plugin_dir);</div>
<div class="line">            <span class="comment">// resolve include_path or fail existance</span></div>
<div class="line">            <span class="keywordflow">if</span> (!$plugin_dir) {</div>
<div class="line">                <span class="keywordflow">if</span> ($smarty-&gt;use_include_path &amp;&amp; !preg_match(<span class="stringliteral">&#39;/^([\/\\\\]|[a-zA-Z]:[\/\\\\])/&#39;</span>, $_plugin_dir)) {</div>
<div class="line">                    <span class="comment">// try PHP include_path</span></div>
<div class="line">                    <span class="keywordflow">if</span> ($_stream_resolve_include_path) {</div>
<div class="line">                        $plugin_dir = stream_resolve_include_path($_plugin_dir);</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        $plugin_dir = <a class="code" href="classSmarty__Internal__Get__Include__Path.html#aba01e023dde600cc9825a7931ac5c5e9">Smarty_Internal_Get_Include_Path::getIncludePath</a>($_plugin_dir);</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> ($plugin_dir !== <span class="keyword">false</span>) {</div>
<div class="line">                        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                            echo <span class="stringliteral">&quot;$plugin_dir is OK.\n&quot;</span>;</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">continue</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        $status = <span class="keyword">false</span>;</div>
<div class="line">                        $message = <span class="stringliteral">&quot;FAILED: $_plugin_dir does not exist (and couldn&#39;t be found in include_path either)&quot;</span>;</div>
<div class="line">                        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                            echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                            $errors[<span class="stringliteral">&#39;plugins_dir&#39;</span>] = $message;</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">continue</span>;</div>
<div class="line">                    }</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $status = <span class="keyword">false</span>;</div>
<div class="line">                    $message = <span class="stringliteral">&quot;FAILED: $_plugin_dir does not exist&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                        echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        $errors[<span class="stringliteral">&#39;plugins_dir&#39;</span>] = $message;</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (!is_dir($plugin_dir)) {</div>
<div class="line">                $status = <span class="keyword">false</span>;</div>
<div class="line">                $message = <span class="stringliteral">&quot;FAILED: $plugin_dir is not a directory&quot;</span>;</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $errors[<span class="stringliteral">&#39;plugins_dir&#39;</span>] = $message;</div>
<div class="line">                }</div>
<div class="line">            } elseif (!is_readable($plugin_dir)) {</div>
<div class="line">                $status = <span class="keyword">false</span>;</div>
<div class="line">                $message = <span class="stringliteral">&quot;FAILED: $plugin_dir is not readable&quot;</span>;</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $errors[<span class="stringliteral">&#39;plugins_dir&#39;</span>] = $message;</div>
<div class="line">                }</div>
<div class="line">            } elseif ($_core_plugins_dir &amp;&amp; $_core_plugins_dir == realpath($plugin_dir)) {</div>
<div class="line">                $_core_plugins_available = <span class="keyword">true</span>;</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo <span class="stringliteral">&quot;$plugin_dir is OK.\n&quot;</span>;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo <span class="stringliteral">&quot;$plugin_dir is OK.\n&quot;</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (!$_core_plugins_available) {</div>
<div class="line">            $status = <span class="keyword">false</span>;</div>
<div class="line">            $message = <span class="stringliteral">&quot;WARNING: Smarty&#39;s own libs/plugins is not available&quot;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">            } elseif (!isset($errors[<span class="stringliteral">&#39;plugins_dir&#39;</span>])) {</div>
<div class="line">                $errors[<span class="stringliteral">&#39;plugins_dir&#39;</span>] = $message;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">            echo <span class="stringliteral">&quot;Testing cache directory...\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">// test if all registered cache_dir is accessible</span></div>
<div class="line">        $__cache_dir = $smarty-&gt;<a class="code" href="classSmarty.html#aad4205cb847e34ebe98cf8562650e5ec">getCacheDir</a>();</div>
<div class="line">        $_cache_dir = realpath($__cache_dir);</div>
<div class="line">        <span class="keywordflow">if</span> (!$_cache_dir) {</div>
<div class="line">            $status = <span class="keyword">false</span>;</div>
<div class="line">            $message = <span class="stringliteral">&quot;FAILED: {$__cache_dir} does not exist&quot;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $errors[<span class="stringliteral">&#39;cache_dir&#39;</span>] = $message;</div>
<div class="line">            }</div>
<div class="line">        } elseif (!is_dir($_cache_dir)) {</div>
<div class="line">            $status = <span class="keyword">false</span>;</div>
<div class="line">            $message = <span class="stringliteral">&quot;FAILED: {$_cache_dir} is not a directory&quot;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $errors[<span class="stringliteral">&#39;cache_dir&#39;</span>] = $message;</div>
<div class="line">            }</div>
<div class="line">        } elseif (!is_readable($_cache_dir)) {</div>
<div class="line">            $status = <span class="keyword">false</span>;</div>
<div class="line">            $message = <span class="stringliteral">&quot;FAILED: {$_cache_dir} is not readable&quot;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $errors[<span class="stringliteral">&#39;cache_dir&#39;</span>] = $message;</div>
<div class="line">            }</div>
<div class="line">        } elseif (!is_writable($_cache_dir)) {</div>
<div class="line">            $status = <span class="keyword">false</span>;</div>
<div class="line">            $message = <span class="stringliteral">&quot;FAILED: {$_cache_dir} is not writable&quot;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $errors[<span class="stringliteral">&#39;cache_dir&#39;</span>] = $message;</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo <span class="stringliteral">&quot;{$_cache_dir} is OK.\n&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">            echo <span class="stringliteral">&quot;Testing configs directory...\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// test if all registered config_dir are accessible</span></div>
<div class="line">        <span class="keywordflow">foreach</span>($smarty-&gt;<a class="code" href="classSmarty.html#ae20099b5aebe8102c265be978cb0808b">getConfigDir</a>() as $config_dir) {</div>
<div class="line">            $_config_dir = $config_dir;</div>
<div class="line">            $config_dir = realpath($config_dir);</div>
<div class="line">            <span class="comment">// resolve include_path or fail existance</span></div>
<div class="line">            <span class="keywordflow">if</span> (!$config_dir) {</div>
<div class="line">                <span class="keywordflow">if</span> ($smarty-&gt;use_include_path &amp;&amp; !preg_match(<span class="stringliteral">&#39;/^([\/\\\\]|[a-zA-Z]:[\/\\\\])/&#39;</span>, $_config_dir)) {</div>
<div class="line">                    <span class="comment">// try PHP include_path</span></div>
<div class="line">                    <span class="keywordflow">if</span> ($_stream_resolve_include_path) {</div>
<div class="line">                        $config_dir = stream_resolve_include_path($_config_dir);</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        $config_dir = <a class="code" href="classSmarty__Internal__Get__Include__Path.html#aba01e023dde600cc9825a7931ac5c5e9">Smarty_Internal_Get_Include_Path::getIncludePath</a>($_config_dir);</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> ($config_dir !== <span class="keyword">false</span>) {</div>
<div class="line">                        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                            echo <span class="stringliteral">&quot;$config_dir is OK.\n&quot;</span>;</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">continue</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        $status = <span class="keyword">false</span>;</div>
<div class="line">                        $message = <span class="stringliteral">&quot;FAILED: $_config_dir does not exist (and couldn&#39;t be found in include_path either)&quot;</span>;</div>
<div class="line">                        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                            echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                            $errors[<span class="stringliteral">&#39;config_dir&#39;</span>] = $message;</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">continue</span>;</div>
<div class="line">                    }</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $status = <span class="keyword">false</span>;</div>
<div class="line">                    $message = <span class="stringliteral">&quot;FAILED: $_config_dir does not exist&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                        echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        $errors[<span class="stringliteral">&#39;config_dir&#39;</span>] = $message;</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (!is_dir($config_dir)) {</div>
<div class="line">                $status = <span class="keyword">false</span>;</div>
<div class="line">                $message = <span class="stringliteral">&quot;FAILED: $config_dir is not a directory&quot;</span>;</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $errors[<span class="stringliteral">&#39;config_dir&#39;</span>] = $message;</div>
<div class="line">                }</div>
<div class="line">            } elseif (!is_readable($config_dir)) {</div>
<div class="line">                $status = <span class="keyword">false</span>;</div>
<div class="line">                $message = <span class="stringliteral">&quot;FAILED: $config_dir is not readable&quot;</span>;</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $errors[<span class="stringliteral">&#39;config_dir&#39;</span>] = $message;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo <span class="stringliteral">&quot;$config_dir is OK.\n&quot;</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">            echo <span class="stringliteral">&quot;Testing sysplugin files...\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// test if sysplugins are available</span></div>
<div class="line">        $source = SMARTY_SYSPLUGINS_DIR;</div>
<div class="line">        <span class="keywordflow">if</span> (is_dir($source)) {</div>
<div class="line">            $expected = array(</div>
<div class="line">                <span class="stringliteral">&quot;smarty_cacheresource.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_cacheresource_custom.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_cacheresource_keyvaluestore.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_config_source.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_cacheresource_file.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_append.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_assign.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_block.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_break.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_call.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_capture.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_config_load.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_continue.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_debug.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_eval.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_extends.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_for.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_foreach.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_function.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_if.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_include.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_include_php.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_insert.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_ldelim.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_nocache.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_private_block_plugin.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_private_function_plugin.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_private_modifier.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_private_object_block_function.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_private_object_function.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_private_print_expression.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_private_registered_block.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_private_registered_function.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_private_special_variable.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_rdelim.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_section.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_setfilter.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compile_while.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_compilebase.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_config.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_config_file_compiler.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_configfilelexer.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_configfileparser.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_data.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_debug.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_filter_handler.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_function_call_handler.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_get_include_path.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_nocache_insert.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_parsetree.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_resource_eval.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_resource_extends.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_resource_file.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_resource_registered.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_resource_stream.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_resource_string.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_smartytemplatecompiler.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_template.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_templatebase.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_templatecompilerbase.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_templatelexer.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_templateparser.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_utility.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_internal_write_file.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_resource.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_resource_custom.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_resource_recompiled.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_resource_uncompiled.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;smarty_security.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">            );</div>
<div class="line">            $iterator = <span class="keyword">new</span> DirectoryIterator($source);</div>
<div class="line">            <span class="keywordflow">foreach</span> ($iterator as $file) {</div>
<div class="line">                <span class="keywordflow">if</span> (!$file-&gt;isDot()) {</div>
<div class="line">                    $filename = $file-&gt;getFilename();</div>
<div class="line">                    <span class="keywordflow">if</span> (isset($expected[$filename])) {</div>
<div class="line">                        unset($expected[$filename]);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> ($expected) {</div>
<div class="line">                $status = <span class="keyword">false</span>;</div>
<div class="line">                $message = <span class="stringliteral">&quot;FAILED: files missing from libs/sysplugins: &quot;</span>. join(<span class="stringliteral">&#39;, &#39;</span>, array_keys($expected));</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $errors[<span class="stringliteral">&#39;sysplugins&#39;</span>] = $message;</div>
<div class="line">                }</div>
<div class="line">            } elseif ($errors === null) {</div>
<div class="line">                echo <span class="stringliteral">&quot;... OK\n&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            $status = <span class="keyword">false</span>;</div>
<div class="line">            $message = <span class="stringliteral">&quot;FAILED: &quot;</span>. SMARTY_SYSPLUGINS_DIR .<span class="stringliteral">&#39; is not a directory&#39;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $errors[<span class="stringliteral">&#39;sysplugins_dir_constant&#39;</span>] = $message;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">            echo <span class="stringliteral">&quot;Testing plugin files...\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// test if core plugins are available</span></div>
<div class="line">        $source = SMARTY_PLUGINS_DIR;</div>
<div class="line">        <span class="keywordflow">if</span> (is_dir($source)) {</div>
<div class="line">            $expected = array(</div>
<div class="line">                <span class="stringliteral">&quot;block.textformat.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.counter.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.cycle.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.fetch.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.html_checkboxes.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.html_image.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.html_options.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.html_radios.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.html_select_date.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.html_select_time.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.html_table.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.mailto.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;function.math.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifier.capitalize.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifier.date_format.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifier.debug_print_var.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifier.escape.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifier.regex_replace.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifier.replace.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifier.spacify.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifier.truncate.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.cat.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.count_characters.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.count_paragraphs.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.count_sentences.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.count_words.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.default.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.escape.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.from_charset.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.indent.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.lower.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.noprint.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.string_format.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.strip.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.strip_tags.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.to_charset.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.unescape.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.upper.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;modifiercompiler.wordwrap.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;outputfilter.trimwhitespace.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;shared.escape_special_chars.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;shared.literal_compiler_param.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;shared.make_timestamp.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;shared.mb_str_replace.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;shared.mb_unicode.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;shared.mb_wordwrap.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;variablefilter.htmlspecialchars.php&quot;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line">            );</div>
<div class="line">            $iterator = <span class="keyword">new</span> DirectoryIterator($source);</div>
<div class="line">            <span class="keywordflow">foreach</span> ($iterator as $file) {</div>
<div class="line">                <span class="keywordflow">if</span> (!$file-&gt;isDot()) {</div>
<div class="line">                    $filename = $file-&gt;getFilename();</div>
<div class="line">                    <span class="keywordflow">if</span> (isset($expected[$filename])) {</div>
<div class="line">                        unset($expected[$filename]);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> ($expected) {</div>
<div class="line">                $status = <span class="keyword">false</span>;</div>
<div class="line">                $message = <span class="stringliteral">&quot;FAILED: files missing from libs/plugins: &quot;</span>. join(<span class="stringliteral">&#39;, &#39;</span>, array_keys($expected));</div>
<div class="line">                <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                    echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $errors[<span class="stringliteral">&#39;plugins&#39;</span>] = $message;</div>
<div class="line">                }</div>
<div class="line">            } elseif ($errors === null) {</div>
<div class="line">                echo <span class="stringliteral">&quot;... OK\n&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            $status = <span class="keyword">false</span>;</div>
<div class="line">            $message = <span class="stringliteral">&quot;FAILED: &quot;</span>. SMARTY_PLUGINS_DIR .<span class="stringliteral">&#39; is not a directory&#39;</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">                echo $message . <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                $errors[<span class="stringliteral">&#39;plugins_dir_constant&#39;</span>] = $message;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($errors === null) {</div>
<div class="line">            echo <span class="stringliteral">&quot;Tests complete.\n&quot;</span>;</div>
<div class="line">            echo <span class="stringliteral">&quot;&lt;/PRE&gt;\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $status;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>template/libs/sysplugins/<a class="el" href="smarty__internal__utility_8php_source.html">smarty_internal_utility.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classSmarty__Internal__Utility.html">Smarty_Internal_Utility</a></li>
    <li class="footer">Generated on Fri Jul 26 2013 23:26:11 for Family Tree by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
