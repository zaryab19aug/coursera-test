<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Family Tree: vanshavali Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Family Tree
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classvanshavali.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classvanshavali-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">vanshavali Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aee7778d3d1ccffd71859d14a811db6ee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#aee7778d3d1ccffd71859d14a811db6ee">__construct</a> ()</td></tr>
<tr class="separator:aee7778d3d1ccffd71859d14a811db6ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a317782832806850a2862914dbceef3c7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a317782832806850a2862914dbceef3c7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>getHeadofFamily</b> ($family_id=null)</td></tr>
<tr class="separator:a317782832806850a2862914dbceef3c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b6c7f158d1ffca2d8b69181a563f041"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a0b6c7f158d1ffca2d8b69181a563f041">distanceFromTop</a> ($<a class="el" href="classmember.html">member</a>, $samefamily=true)</td></tr>
<tr class="separator:a0b6c7f158d1ffca2d8b69181a563f041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1673bbda002d16cf5596737bfc7a2369"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1673bbda002d16cf5596737bfc7a2369"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>memberDistance</b> ($to, $from)</td></tr>
<tr class="separator:a1673bbda002d16cf5596737bfc7a2369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac633019986e8d90d915ddafb772e26e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#aac633019986e8d90d915ddafb772e26e">calculateRelation</a> ($from, $to)</td></tr>
<tr class="separator:aac633019986e8d90d915ddafb772e26e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1603b138202edbe428836fe91ddd23c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a1603b138202edbe428836fe91ddd23c4">hasAccess</a> ($who, $whom)</td></tr>
<tr class="separator:a1603b138202edbe428836fe91ddd23c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bf310bbd46feca98b4c5b568575b6d4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a9bf310bbd46feca98b4c5b568575b6d4">makeAdmin</a> ($<a class="el" href="classmember.html">member</a>)</td></tr>
<tr class="separator:a9bf310bbd46feca98b4c5b568575b6d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d43abd82aa27e69dadbab48492801f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a1d43abd82aa27e69dadbab48492801f0">firstTimeFamily</a> ()</td></tr>
<tr class="separator:a1d43abd82aa27e69dadbab48492801f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b4f7c8e20e73e16bb9505ac0cae4817"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a0b4f7c8e20e73e16bb9505ac0cae4817">firstTime</a> ()</td></tr>
<tr class="separator:a0b4f7c8e20e73e16bb9505ac0cae4817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ae3b4be4f88572f7780304504c39dbc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a0ae3b4be4f88572f7780304504c39dbc">addmember_explicit</a> ($membername, $gender, $familyid)</td></tr>
<tr class="separator:a0ae3b4be4f88572f7780304504c39dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e2dc92ebdd355f1e995976f79285d1b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a0e2dc92ebdd355f1e995976f79285d1b">addfamily</a> ($name)</td></tr>
<tr class="separator:a0e2dc92ebdd355f1e995976f79285d1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91783e3f043278513c32ec2cca7f4c15"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a91783e3f043278513c32ec2cca7f4c15">getmember</a> ($id)</td></tr>
<tr class="separator:a91783e3f043278513c32ec2cca7f4c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3de4f0b21ee02db0c12053d359543561"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a3de4f0b21ee02db0c12053d359543561">register</a> ($details)</td></tr>
<tr class="separator:a3de4f0b21ee02db0c12053d359543561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba5843e1d503de982e31f1366cef2abb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#aba5843e1d503de982e31f1366cef2abb">mail</a> ($template_name, $data, $to, $subject)</td></tr>
<tr class="separator:aba5843e1d503de982e31f1366cef2abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affea231be22eb26920637ec41b5dab04"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#affea231be22eb26920637ec41b5dab04">mailAdmin</a> ($templateName, $data, $subject)</td></tr>
<tr class="separator:affea231be22eb26920637ec41b5dab04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a221c06bb6df817d86b784fddbada6855"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a221c06bb6df817d86b784fddbada6855">createstruct</a> ($row)</td></tr>
<tr class="separator:a221c06bb6df817d86b784fddbada6855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f7d7e7137457aefbbd85ac33c5c1372"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a9f7d7e7137457aefbbd85ac33c5c1372">getchild</a> ($id)</td></tr>
<tr class="separator:a9f7d7e7137457aefbbd85ac33c5c1372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ff1ca4043648fa9961a6fe2c1f94087"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#a3ff1ca4043648fa9961a6fe2c1f94087">getwife</a> ($id)</td></tr>
<tr class="separator:a3ff1ca4043648fa9961a6fe2c1f94087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaff3d01d67e94c2371c39adabf1aba1e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#aaff3d01d67e94c2371c39adabf1aba1e">getJson_new</a> ($familyid=1)</td></tr>
<tr class="separator:aaff3d01d67e94c2371c39adabf1aba1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf31d7537f11e2235d6ffdcc7e8b11e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#adf31d7537f11e2235d6ffdcc7e8b11e7">getchild_new</a> ($id)</td></tr>
<tr class="separator:adf31d7537f11e2235d6ffdcc7e8b11e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac63d3c3e833350cc3af38d9ba335be4c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#ac63d3c3e833350cc3af38d9ba335be4c">getwife_new</a> ($id)</td></tr>
<tr class="separator:ac63d3c3e833350cc3af38d9ba335be4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8a53647182677d9f2f6f76a0dfd79b0f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8a53647182677d9f2f6f76a0dfd79b0f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$admin_email</b></td></tr>
<tr class="separator:a8a53647182677d9f2f6f76a0dfd79b0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa0e3d9fa9b16e19fd150ed61781343f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvanshavali.html#aa0e3d9fa9b16e19fd150ed61781343f8">comparerelationArray</a> ($array)</td></tr>
<tr class="separator:aa0e3d9fa9b16e19fd150ed61781343f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a55652a5f790bf930fa757ca553fd1cdb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><b>$relation_array</b></td></tr>
<tr class="separator:a55652a5f790bf930fa757ca553fd1cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This the core Class of the Family Tree and contains function to manage it.</p>
<dl class="section author"><dt>Author</dt><dd>piyush </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00011">11</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aee7778d3d1ccffd71859d14a811db6ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::__construct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor of the class </p>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00017">17</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                                  {</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0e2dc92ebdd355f1e995976f79285d1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::addfamily </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to add family in the Tree. Returns the ID of the new family created or returns false if any error occured   $db Instance of db class </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>The name of the Family </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer ID of the new Family </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00427">427</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                              {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        global $db;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">if</span> ($db-&gt;query(<span class="stringliteral">&quot;insert into family (family_name,ts) values(&#39;$name Family&#39;,&quot;</span> . time() . <span class="stringliteral">&quot;)&quot;</span>)) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keywordflow">return</span> $db-&gt;last_id();</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0ae3b4be4f88572f7780304504c39dbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::addmember_explicit </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$membername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$gender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$familyid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This special function is used to add member to the Tree without using any of the member class Returns the ID of the new member else false if any error occurred   $db Instance of the db class </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$membername</td><td>The name of the new member to be added </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$gender</td><td>The gender of the new member </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$familyid</td><td>The Family ID of the new member </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer ID of the new member created </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00410">410</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                                                                 {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        global $db;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">if</span> ($db-&gt;query(<span class="stringliteral">&quot;insert into member (membername,gender,family_id) values (&#39;$membername&#39;,$gender,$familyid)&quot;</span>)) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">return</span> mysql_insert_id();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aac633019986e8d90d915ddafb772e26e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::calculateRelation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">type</td><td class="paramname">$from</td><td></td></tr>
    <tr><td class="paramtype">type</td><td class="paramname">$to</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string|boolean</dd></dl>
<p>Constants 0 brothers 1 mother 2 father 3 uncle chacha 4 aunty chachi 5 sister 6 grand father 7 grand mother 8 fufa (male) 9 fufa (female) 10 mama 11 mami 12 brother cousin 13 sister cousin 14 bhanja 15 bhanji 16 granchild 17 bhatiji 18 bhatija 19 Fore father 20 fore mother 21 grand son 22 grand daughter 23 bahoo 24 bahoo cousin 25 nata 26 nati </p>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00288">288</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                                                  {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> ($from === $to) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> ($from == null or $to == null) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        $from = $this-&gt;<a class="code" href="classvanshavali.html#a91783e3f043278513c32ec2cca7f4c15">getmember</a>($from);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        $to = $this-&gt;<a class="code" href="classvanshavali.html#a91783e3f043278513c32ec2cca7f4c15">getmember</a>($to);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="comment">//Get the parameters between them</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        $relationparam = $this-&gt;memberDistance($to, $from);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        $result = $this-&gt;<a class="code" href="classvanshavali.html#aa0e3d9fa9b16e19fd150ed61781343f8">comparerelationArray</a>($relationparam);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">if</span> (is_array($result)) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">return</span> $result;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">return</span> print_r($relationparam); <span class="comment">//Just for development purpose</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">//            return &quot;Cannot determine relation&quot;;</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="ttc" id="classvanshavali_html_a91783e3f043278513c32ec2cca7f4c15"><div class="ttname"><a href="classvanshavali.html#a91783e3f043278513c32ec2cca7f4c15">vanshavali\getmember</a></div><div class="ttdeci">getmember($id)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00442">vanshavali.php:442</a></div></div>
<div class="ttc" id="classvanshavali_html_aa0e3d9fa9b16e19fd150ed61781343f8"><div class="ttname"><a href="classvanshavali.html#aa0e3d9fa9b16e19fd150ed61781343f8">vanshavali\comparerelationArray</a></div><div class="ttdeci">comparerelationArray($array)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00189">vanshavali.php:189</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa0e3d9fa9b16e19fd150ed61781343f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::comparerelationArray </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$array</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">type</td><td class="paramname">$array</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00189">189</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                                  {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="comment">//Initialize all the parameters</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        $is_child = $is_parent = $is_spouse = $gender = $sameFamily = $sameFather = $diffsex = $levelDistance = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        $result = array();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        $approx_relation = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="comment">//Now compare this array with all options that we have</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">foreach</span> ($this-&gt;relation_array as $key =&gt; $singlerelation) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            $is_child = ($singlerelation[0] == $array[<span class="stringliteral">&#39;is_child&#39;</span>]);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            $is_parent = ($singlerelation[1] == $array[<span class="stringliteral">&#39;is_parent&#39;</span>]);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            $is_spouse = ($singlerelation[2] == $array[<span class="stringliteral">&#39;is_spouse&#39;</span>]);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            $gender = ($singlerelation[3] == null ? <span class="keyword">true</span> : ($singlerelation[3] == $array[<span class="stringliteral">&#39;gender&#39;</span>]));</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            $sameFamily = ($singlerelation[4] == $array[<span class="stringliteral">&#39;sameFamily&#39;</span>]);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            $sameFather = ($singlerelation[5] == $array[<span class="stringliteral">&#39;sameFather&#39;</span>]);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            $diffsex = ($singlerelation[6] == null ? <span class="keyword">true</span> : ($singlerelation[6] == $array[<span class="stringliteral">&#39;diffsex&#39;</span>]));</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            $levelDistance = ($singlerelation[7] == $array[<span class="stringliteral">&#39;levelDistance&#39;</span>]);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="comment">//Check if this relation was approx relations</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">if</span> ($singlerelation[3] == null or $singlerelation[6] == null) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                $approx_relation = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">if</span> ($is_child &amp;&amp; $is_parent &amp;&amp; $is_spouse &amp;&amp; $gender &amp;&amp;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    $sameFamily &amp;&amp; $sameFather &amp;&amp; $diffsex &amp;&amp; $levelDistance) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                $result[] = array($singlerelation[8], $singlerelation[9], $approx_relation);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="comment">//Reset the approx_relation variable for the next relation</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            $approx_relation = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>($result) == 0) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// We couldn&#39;t find such relation</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="comment">//Check here if we have multiple values</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>($result) == 1) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="comment">//Congrats, we heve only on relation to show.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="keywordflow">return</span> $result[0];</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        } elseif (<span class="keyword">sizeof</span>($result) &gt; 1) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="comment">//We have more than one relation which is matching</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="comment">//Select the one which is not approx</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            $accurate_relation = -1;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keywordflow">foreach</span> ($result as $matched_relation) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <span class="keywordflow">if</span> ($matched_relation[2] == <span class="keyword">false</span>) { <span class="comment">//This says that it is not approximate relation</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                    <span class="comment">//Get out of the loop</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    $accurate_relation = $matched_relation;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="comment">//Check if we have accurate relation</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">if</span> ($accurate_relation == -1) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//Two many relations matching</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                <span class="keywordflow">return</span> $accurate_relation;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a221c06bb6df817d86b784fddbada6855"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::createstruct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$row</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to used to create structure to used by JIT. It takes input the array of a row from member table and converts it into the JIT structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$row</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00553">553</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                                {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        global $user;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        $obj = array();</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        $obj[<span class="stringliteral">&#39;id&#39;</span>] = $row[<span class="stringliteral">&quot;id&quot;</span>];</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        $obj[<span class="stringliteral">&#39;name&#39;</span>] = trim($row[<span class="stringliteral">&#39;membername&#39;</span>]) == <span class="stringliteral">&quot;&quot;</span> ? <span class="stringliteral">&quot;unknown&quot;</span> : $row[<span class="stringliteral">&quot;membername&quot;</span>];</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        $obj[<span class="stringliteral">&#39;data&#39;</span>] = array(</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="stringliteral">&quot;dob&quot;</span> =&gt; ($row[<span class="stringliteral">&#39;dob&#39;</span>] ? strftime(<span class="stringliteral">&quot;%d/%m/%Y&quot;</span>, $row[<span class="stringliteral">&#39;dob&#39;</span>]) : <span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="stringliteral">&quot;relationship_status&quot;</span> =&gt; ($row[<span class="stringliteral">&#39;relationship_status&#39;</span>] == 0 ? <span class="stringliteral">&quot;Single&quot;</span> :</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    <span class="stringliteral">&quot;Married&quot;</span>),</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="stringliteral">&quot;relationship_status_id&quot;</span> =&gt; $row[<span class="stringliteral">&#39;relationship_status&#39;</span>],</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="stringliteral">&quot;alive&quot;</span> =&gt; ($row[<span class="stringliteral">&#39;alive&#39;</span>] == 0 ? <span class="stringliteral">&quot;Deceased&quot;</span> : <span class="stringliteral">&quot;Living&quot;</span>),</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="stringliteral">&quot;gender&quot;</span> =&gt; $row[<span class="stringliteral">&#39;gender&#39;</span>],</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="stringliteral">&quot;alive_id&quot;</span> =&gt; $row[<span class="stringliteral">&#39;alive&#39;</span>],</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            <span class="stringliteral">&quot;gaon&quot;</span> =&gt; $row[<span class="stringliteral">&#39;gaon&#39;</span>],</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="stringliteral">&#39;image&#39;</span> =&gt; empty($row[<span class="stringliteral">&#39;profilepic&#39;</span>]) ? <span class="stringliteral">&quot;common.png&quot;</span> : $row[<span class="stringliteral">&#39;profilepic&#39;</span>],</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="stringliteral">&#39;familyid&#39;</span> =&gt; $row[<span class="stringliteral">&#39;family_id&#39;</span>]</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">//            &#39;relation&#39; =&gt; ($this-&gt;calculateRelation($row[&quot;id&quot;], $user-&gt;user[&quot;id&quot;]) ? $user-&gt;is_authenticated() : &quot;Login to view relation&quot;)</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        );</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keywordflow">return</span> $obj;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b6c7f158d1ffca2d8b69181a563f041"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::distanceFromTop </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$samefamily</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">type</td><td class="paramname">$member</td><td></td></tr>
    <tr><td class="paramtype">type</td><td class="paramname">$samefamily</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00041">41</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                                                                 {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="comment">//While we are going up. We will first go to mother and then we will</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="comment">// to the father. This way we will be able to calculate relations for</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="comment">// female members of the family too.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keywordflow">if</span> (!$samefamily) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            <span class="comment">//Since the family is not same. We will first switch to husband</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            $member = $this-&gt;<a class="code" href="classvanshavali.html#a91783e3f043278513c32ec2cca7f4c15">getmember</a>($member-&gt;data[<span class="stringliteral">&#39;related_to&#39;</span>]);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        } <span class="comment">//else we continue with normal execution</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        $distance = 0;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        $mother = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            <span class="keywordflow">if</span> ($mother) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                <span class="comment">//Get father</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                <span class="comment">//echo &quot;\nget the father to get mother. Father id = &quot; . $member-&gt;data[&#39;sonof&#39;];</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                $member = $this-&gt;<a class="code" href="classvanshavali.html#a91783e3f043278513c32ec2cca7f4c15">getmember</a>($member-&gt;data[<span class="stringliteral">&#39;sonof&#39;</span>]);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                <span class="keywordflow">if</span> ($member === <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">//                    echo &quot;\nWent into first part break. Couldn&#39;t get the above given father&quot;;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <span class="comment">//Get mother through him</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                $member = $this-&gt;<a class="code" href="classvanshavali.html#a91783e3f043278513c32ec2cca7f4c15">getmember</a>($member-&gt;data[<span class="stringliteral">&#39;related_to&#39;</span>]);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">//                echo &quot; \nhere we should get the mother. Mother id = &quot; . $member-&gt;id;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                $mother = <span class="keyword">false</span>; <span class="comment">//next turn is for father</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                $distance++;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <span class="comment">//Check for root. Last person will be male</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <span class="keywordflow">if</span> ($member == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//                    echo &quot;\nPrevious loop didn&#39;t return any member or there is no father to this member = &quot; . $member-&gt;data[&#39;sonof&#39;];</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                <span class="comment">//Previous loop was for mother. This one would be for father</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                $member = $this-&gt;<a class="code" href="classvanshavali.html#a91783e3f043278513c32ec2cca7f4c15">getmember</a>($member-&gt;data[<span class="stringliteral">&#39;related_to&#39;</span>]);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                <span class="keywordflow">if</span> ($member == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">//                    echo &quot; we can&#39;t find a husband to this wife.\n&quot;;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                $mother = <span class="keyword">true</span>; <span class="comment">//Next up is mother</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                $distance++;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">if</span> (!$samefamily) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="comment">//Since we switched to husband in the starting of the function,</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="comment">//We are by default one level down. Lets add to it.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            $distance++;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">return</span> $distance;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
<div class="ttc" id="classvanshavali_html_a91783e3f043278513c32ec2cca7f4c15"><div class="ttname"><a href="classvanshavali.html#a91783e3f043278513c32ec2cca7f4c15">vanshavali\getmember</a></div><div class="ttdeci">getmember($id)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00442">vanshavali.php:442</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b4f7c8e20e73e16bb9505ac0cae4817"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::firstTime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>$db </p>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00385">385</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                                {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        global $db;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="comment">//Get the count on the number of members</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        $query = $db-&gt;query(<span class="stringliteral">&quot;select count(*) membercount from member;&quot;</span>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        $count = $db-&gt;fetch($query);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">if</span> ($count[<span class="stringliteral">&#39;membercount&#39;</span>] &gt; 0) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1d43abd82aa27e69dadbab48492801f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::firstTimeFamily </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>$db </p>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00365">365</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                      {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        global $db;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">//Get the count on the number of members</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        $query = $db-&gt;query(<span class="stringliteral">&quot;select count(*) membercount from family;&quot;</span>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        $count = $db-&gt;fetch($query);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">if</span> ($count[<span class="stringliteral">&#39;membercount&#39;</span>] &gt; 0) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9f7d7e7137457aefbbd85ac33c5c1372"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::getchild </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to get the child of the given member to be fetched to the JIT. It fetches the details of the given member from the database and uses <a class="el" href="classvanshavali.html#a221c06bb6df817d86b784fddbada6855">createstruct()</a> to convert it into JIT structure.   $db Instance of the db class </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>Ihe of the member whose children are to be fetched </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00583">583</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                           {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        global $db;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        $finalarray = array();</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        $query = $db-&gt;query(<span class="stringliteral">&quot;select * from member where sonof=$id and dontshow=0&quot;</span>);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">while</span> ($row = $db-&gt;fetch($query)) {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            $obj = $this-&gt;<a class="code" href="classvanshavali.html#a221c06bb6df817d86b784fddbada6855">createstruct</a>($row);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            $obj[<span class="stringliteral">&#39;children&#39;</span>] = $this-&gt;<a class="code" href="classvanshavali.html#a3ff1ca4043648fa9961a6fe2c1f94087">getwife</a>($row[<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            array_push($finalarray, $obj);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">return</span> $finalarray;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="ttc" id="classvanshavali_html_a221c06bb6df817d86b784fddbada6855"><div class="ttname"><a href="classvanshavali.html#a221c06bb6df817d86b784fddbada6855">vanshavali\createstruct</a></div><div class="ttdeci">createstruct($row)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00553">vanshavali.php:553</a></div></div>
<div class="ttc" id="classvanshavali_html_a3ff1ca4043648fa9961a6fe2c1f94087"><div class="ttname"><a href="classvanshavali.html#a3ff1ca4043648fa9961a6fe2c1f94087">vanshavali\getwife</a></div><div class="ttdeci">getwife($id)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00603">vanshavali.php:603</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adf31d7537f11e2235d6ffdcc7e8b11e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::getchild_new </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to generate JSON structure to be used in JIT of all children and subchildren under the passed member   $db Instance of the db class </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>ID of the member whose children are to be fetched </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00657">657</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                               {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        global $db;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        $finalarray = array();</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        $query = $db-&gt;query(<span class="stringliteral">&quot;select * from member where sonof=$id and dontshow=0&quot;</span>);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordflow">while</span> ($row = $db-&gt;fetch($query)) {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            $obj = $this-&gt;infovisstruct($row);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            $obj[<span class="stringliteral">&#39;children&#39;</span>] = $this-&gt;<a class="code" href="classvanshavali.html#a3ff1ca4043648fa9961a6fe2c1f94087">getwife</a>($row[<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            array_push($finalarray, $obj);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">return</span> $finalarray;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div>
<div class="ttc" id="classvanshavali_html_a3ff1ca4043648fa9961a6fe2c1f94087"><div class="ttname"><a href="classvanshavali.html#a3ff1ca4043648fa9961a6fe2c1f94087">vanshavali\getwife</a></div><div class="ttdeci">getwife($id)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00603">vanshavali.php:603</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaff3d01d67e94c2371c39adabf1aba1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::getJson_new </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$familyid</em> = <code>1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to get the members in JSON format to be used with the JIT   $db Instance of db class </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$familyid</td><td>The ID of the family whose member are to be shown By default members of Family 1 are shown </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array|boolean </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00628">628</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                                        {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        global $db;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        $finalarray = array();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        $query = $db-&gt;query(<span class="stringliteral">&quot;select * from member where sonof is null and dontshow=0 and gender=0&quot;</span>);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="comment">//Loop through all the members and feed the row data to a function</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="comment">//Loop will filter the data according to the gender and return</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="comment">//Keep adding the information to a final array</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        $row = $db-&gt;fetch($query);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="comment">//Now feed the row to function and in return get the array interface</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">if</span> (is_array($row)) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            $obj = $this-&gt;infovisstruct($row);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="comment">//$obj[&#39;children&#39;] = $this-&gt;getwife($row[&#39;id&#39;]);</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            array_push($finalarray, $obj);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <span class="keywordflow">return</span> $finalarray;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a91783e3f043278513c32ec2cca7f4c15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::getmember </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used get the details about a member.   $db Instance of the db class </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>ID of the member whose details is to be fetched </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00442">442</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                            {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="comment">//Before doing anything. Lets check if we have everything</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">if</span> (empty($id)) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        global $db;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        $query = $db-&gt;query(<span class="stringliteral">&quot;select id from member where id=$id&quot;</span>);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        $ret = $db-&gt;fetch($query);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="comment">//Check if we have such member or not</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">if</span> ($ret == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="comment">//else proceed with normal execution</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        $member = <span class="keyword">new</span> <a class="code" href="classmember.html">member</a>($ret[<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">return</span> $member;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    }</div>
<div class="ttc" id="classmember_html"><div class="ttname"><a href="classmember.html">member</a></div><div class="ttdef"><b>Definition:</b> <a href="member_8php_source.html#l00010">member.php:10</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3ff1ca4043648fa9961a6fe2c1f94087"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::getwife </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to get the wife of the given member to be fetched into JIT. It fetches the details of the given member from the database and uses <a class="el" href="classvanshavali.html#a221c06bb6df817d86b784fddbada6855">createstruct()</a> to convert it into JIT structure.   $db Instance of db class </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>ID of the member whose wife is to be fetched </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array|null </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00603">603</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                          {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        global $db;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        $finalarray = array();</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        $row = $db-&gt;get(<span class="stringliteral">&quot;select * from member where id in (select related_to from member where id=$id)&quot;</span>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        $obj = array();</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="comment">// Space Tree Object if he has a wife</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">if</span> ($row) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            $obj = $this-&gt;<a class="code" href="classvanshavali.html#a221c06bb6df817d86b784fddbada6855">createstruct</a>($row);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            $obj[<span class="stringliteral">&#39;children&#39;</span>] = $this-&gt;<a class="code" href="classvanshavali.html#a9f7d7e7137457aefbbd85ac33c5c1372">getchild</a>($id);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            array_push($finalarray, $obj);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="keywordflow">return</span> $finalarray;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    }</div>
<div class="ttc" id="classvanshavali_html_a9f7d7e7137457aefbbd85ac33c5c1372"><div class="ttname"><a href="classvanshavali.html#a9f7d7e7137457aefbbd85ac33c5c1372">vanshavali\getchild</a></div><div class="ttdeci">getchild($id)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00583">vanshavali.php:583</a></div></div>
<div class="ttc" id="classvanshavali_html_a221c06bb6df817d86b784fddbada6855"><div class="ttname"><a href="classvanshavali.html#a221c06bb6df817d86b784fddbada6855">vanshavali\createstruct</a></div><div class="ttdeci">createstruct($row)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00553">vanshavali.php:553</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac63d3c3e833350cc3af38d9ba335be4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::getwife_new </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to generate JSON structure to be used in JIT of the wife of the passed member   $db Instance of db class </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>ID of the member whose wife is to be fetched </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array|null </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00676">676</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                              {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        global $db;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        $finalarray = array();</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        $row = $db-&gt;get(<span class="stringliteral">&quot;select * from member where id in (select related_to from member where id=$id)&quot;</span>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        $obj = array();</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="comment">// Space Tree Object if he has a wife</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keywordflow">if</span> ($row) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            $obj = $this-&gt;infovisstruct($row);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            $obj[<span class="stringliteral">&#39;children&#39;</span>] = $this-&gt;<a class="code" href="classvanshavali.html#a9f7d7e7137457aefbbd85ac33c5c1372">getchild</a>($id);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            array_push($finalarray, $obj);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <span class="keywordflow">return</span> $finalarray;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="ttc" id="classvanshavali_html_a9f7d7e7137457aefbbd85ac33c5c1372"><div class="ttname"><a href="classvanshavali.html#a9f7d7e7137457aefbbd85ac33c5c1372">vanshavali\getchild</a></div><div class="ttdeci">getchild($id)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00583">vanshavali.php:583</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1603b138202edbe428836fe91ddd23c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::hasAccess </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$whom</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">type</td><td class="paramname">$who</td><td></td></tr>
    <tr><td class="paramtype">type</td><td class="paramname">$whom</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00319">319</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                                           {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="comment">//accessArray</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        $accessArray = array(12, 13, 15, 16, 0, 17, 1, 2);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="comment">//Basic things. User can edit is own information.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">if</span> ($who === $whom) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="comment">//Make a check if the person is admin</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        $mclass = <span class="keyword">new</span> <a class="code" href="classmember.html">member</a>($who);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">if</span> ($mclass-&gt;isAdmin()) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="comment">//The person suggesting is admin. Just do it. :P</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        $relation = $this-&gt;<a class="code" href="classvanshavali.html#aac633019986e8d90d915ddafb772e26e">calculateRelation</a>($who, $whom);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span> (in_array($relation, $accessArray)) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="ttc" id="classvanshavali_html_aac633019986e8d90d915ddafb772e26e"><div class="ttname"><a href="classvanshavali.html#aac633019986e8d90d915ddafb772e26e">vanshavali\calculateRelation</a></div><div class="ttdeci">calculateRelation($from, $to)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00288">vanshavali.php:288</a></div></div>
<div class="ttc" id="classmember_html"><div class="ttname"><a href="classmember.html">member</a></div><div class="ttdef"><b>Definition:</b> <a href="member_8php_source.html#l00010">member.php:10</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aba5843e1d503de982e31f1366cef2abb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::mail </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$template_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$subject</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to send a mail to an emailID. Returns false on error   $template Instance of template class </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$template_name</td><td>The name of the mail template to be used in the mail </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td>The variables needed by the template used in the mail </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$to</td><td>EmailID of the Recipent </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$subject</td><td>The subject of the Mail </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00515">515</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                                        {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        global $template;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="comment">//Add Global variable of domain</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        $user_email = $this-&gt;admin_email;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="comment">//Fetch body from template</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        $template-&gt;assign($data);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        $body = $template-&gt;fetch($template_name);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="comment">//Mail Headers</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        $headers = <span class="stringliteral">&quot;From: $user_email\r\n&quot;</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        $headers .= <span class="stringliteral">&quot;Return-Path: $to\r\n&quot;</span>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        $headers .= <span class="stringliteral">&quot;X-Mailer: PHP/&quot;</span> . phpversion() . <span class="stringliteral">&quot;\r\n&quot;</span>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        $headers .= <span class="stringliteral">&#39;MIME-Version: 1.0&#39;</span> . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        $headers .= <span class="stringliteral">&#39;Content-type: text/html; UTF-8&#39;</span> . <span class="stringliteral">&quot;\r\n&quot;</span>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classvanshavali.html#aba5843e1d503de982e31f1366cef2abb">mail</a>($to, $subject, $body, $headers);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    }</div>
<div class="ttc" id="classvanshavali_html_aba5843e1d503de982e31f1366cef2abb"><div class="ttname"><a href="classvanshavali.html#aba5843e1d503de982e31f1366cef2abb">vanshavali\mail</a></div><div class="ttdeci">mail($template_name, $data, $to, $subject)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00515">vanshavali.php:515</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="affea231be22eb26920637ec41b5dab04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::mailAdmin </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$templateName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$subject</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">type</td><td class="paramname">$templateName</td><td></td></tr>
    <tr><td class="paramtype">type</td><td class="paramname">$data</td><td></td></tr>
    <tr><td class="paramtype">type</td><td class="paramname">$subject</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>type </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00541">541</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                                                       {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classvanshavali.html#aba5843e1d503de982e31f1366cef2abb">mail</a>($templateName, $data, $this-&gt;admin_email, $subject);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    }</div>
<div class="ttc" id="classvanshavali_html_aba5843e1d503de982e31f1366cef2abb"><div class="ttname"><a href="classvanshavali.html#aba5843e1d503de982e31f1366cef2abb">vanshavali\mail</a></div><div class="ttdeci">mail($template_name, $data, $to, $subject)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00515">vanshavali.php:515</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9bf310bbd46feca98b4c5b568575b6d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::makeAdmin </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$member</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>$db </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">type</td><td class="paramname">$member</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>type </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00352">352</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                       {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        global $db;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        $query = $db-&gt;query(<span class="stringliteral">&quot;Update member set admin = 1 where id = $member&quot;</span>);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">return</span> $query;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3de4f0b21ee02db0c12053d359543561"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::register </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$details</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to register a user in Family Tree. Returns false on error.   $db Instance of db class   $user Instance of user class </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$details</td><td>Array containing details about the new member </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00471">471</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                                {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        global $db, $user;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="comment">//convert the password to md5 hash</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        $details[1] = md5($details[1]);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="comment">//The token for activation</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        $token = $user-&gt;generate_token();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="comment">//Sql Statement</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">if</span> (!empty($details[8])) { <span class="comment">//If member is not already connected to Family Tree then insert else update</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            $sql = <span class="stringliteral">&quot;update member set membername=&#39;$details[9]&#39;,username=&#39;$details[0]&#39;,password=&#39;$details[1]&#39;,dob=$details[2],gender=$details[3],relationship_status=$details[4],gaon=&#39;$details[5]&#39;,</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="stringliteral">    emailid=&#39;$details[6]&#39;,alive=1,aboutme=&#39;$details[7]&#39;,joined=&quot;</span> . time() . <span class="stringliteral">&quot;,tokenforact=&#39;$token&#39; where id=$details[8]&quot;</span>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            $sql = <span class="stringliteral">&quot;insert into member (membername,username,password,dob,gender,relationship_status,gaon,emailid,alive,aboutme,joined,tokenforact, family_id)</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="stringliteral">                values(&#39;$details[9]&#39;,&#39;$details[0]&#39;,&#39;$details[1]&#39;,$details[2],$details[3],$details[4],&#39;$details[5]&#39;,&#39;$details[6]&#39;,1,&#39;$details[7]&#39;,&quot;</span> . time() . <span class="stringliteral">&quot;,&#39;$token&#39;, $details[10])&quot;</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="comment">//Finally execute the sql</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        $ret = $db-&gt;query($sql);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="comment">//Mail Options</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        $mail_options = array(</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="stringliteral">&#39;username&#39;</span> =&gt; $details[0],</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="stringliteral">&#39;email&#39;</span> =&gt; $details[6],</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="stringliteral">&#39;not_connected&#39;</span> =&gt; !empty($details[8]) ? <span class="keyword">true</span> : <span class="keyword">false</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        );</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">if</span> ($ret != <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            $this-&gt;<a class="code" href="classvanshavali.html#aba5843e1d503de982e31f1366cef2abb">mail</a>(<span class="stringliteral">&quot;mail.register.confirm.tpl&quot;</span>, $mail_options, $details[6], <span class="stringliteral">&#39;Welcome to Vanshavali | Email Confirmation&#39;</span>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            trigger_error(<span class="stringliteral">&quot;Cannot Connect to the database. Please try again by refreshing the page&quot;</span>, E_USER_ERROR);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    }</div>
<div class="ttc" id="classvanshavali_html_aba5843e1d503de982e31f1366cef2abb"><div class="ttname"><a href="classvanshavali.html#aba5843e1d503de982e31f1366cef2abb">vanshavali\mail</a></div><div class="ttdeci">mail($template_name, $data, $to, $subject)</div><div class="ttdef"><b>Definition:</b> <a href="vanshavali_8php_source.html#l00515">vanshavali.php:515</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a55652a5f790bf930fa757ca553fd1cdb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vanshavali::$relation_array</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= array(</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, MALE, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, -1, <span class="stringliteral">&quot;Wife&quot;</span>, 12),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, FEMALE, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, -1, <span class="stringliteral">&quot;Husband&quot;</span>, 13),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, FEMALE, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, -1, <span class="stringliteral">&quot;Brother-in-law (Devar)&quot;</span>, 14),</div>
<div class="line">        array(<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, -2, <span class="stringliteral">&quot;Son&quot;</span>, 15),</div>
<div class="line">        array(<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, -2, <span class="stringliteral">&quot;Daughter&quot;</span>, 16),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">true</span>, <span class="keyword">true</span>, True, 0, <span class="stringliteral">&quot;Brother&quot;</span>, 0),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, 0, <span class="stringliteral">&quot;Sister&quot;</span>, 17),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, null, <span class="keyword">false</span>, <span class="keyword">false</span>, null, 1, <span class="stringliteral">&quot;Mother&quot;</span>, 1),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, null, <span class="keyword">true</span>, <span class="keyword">false</span>, null, 2, <span class="stringliteral">&quot;Father&quot;</span>, 2),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, 2, <span class="stringliteral">&quot;Chacha (Uncle)&quot;</span>, 3),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, 1, <span class="stringliteral">&quot;Chachi (Aunt)&quot;</span>, 4),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, 0, <span class="stringliteral">&quot;Cousin Sister&quot;</span>, 5),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, 0, <span class="stringliteral">&quot;Cousin Brother&quot;</span>, 6),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, -1, <span class="stringliteral">&quot;Bhabhi (Sister-in-law)&quot;</span>, 7),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, -2, <span class="stringliteral">&quot;Bhatiji (Niece)&quot;</span>, 8),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, -2, <span class="stringliteral">&quot;Bhatija (Niece)&quot;</span>, 9),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, 3, <span class="stringliteral">&quot;Dadi Maa (GrandMother)&quot;</span>, 10),</div>
<div class="line">        array(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, null, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, 4, <span class="stringliteral">&quot;Dada Ji (GrandFather)&quot;</span>, 11),</div>
<div class="line">    )</div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="vanshavali_8php_source.html#l00163">163</a> of file <a class="el" href="vanshavali_8php_source.html">vanshavali.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>vanshavali/<a class="el" href="vanshavali_8php_source.html">vanshavali.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classvanshavali.html">vanshavali</a></li>
    <li class="footer">Generated on Sun Jun 12 2016 20:56:15 for Family Tree by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
